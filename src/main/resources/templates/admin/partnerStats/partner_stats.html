<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>ì œíœ´ì  í†µê³„</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
<style>
    /* ===== ì „ì²´ ë°°ê²½ ===== */
    body { 
        background-color: #2c2c3e;
        color: #f1f1f1;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    /* ===== íƒ€ì´í‹€ ===== */
    h2 {
        font-size: 2rem;
        font-weight: 700;
        color: #ffb74d;
        text-shadow: 1px 1px 4px rgba(0,0,0,0.4);
        display: inline-block;
        margin-bottom: 20px;
        position: relative;
    }
    h2::after {
        content: '';
        display: block;
        width: 40%;
        height: 3px;
        background: #ffb74d;
        margin-top: 6px;
        border-radius: 2px;
    }

    /* ===== ê²€ìƒ‰ì°½ ===== */
    .search-box .form-control-wrapper {
        position: relative;
        width: 100%;
        height: 100%;
    }
    .search-box .form-control {
        background-color: #3a3a51;
        color: #f1f1f1;
        border: 1px solid #555;
        width: 100%;
        height: 100%;
        padding: 0.5rem;
    }
    .search-box .form-control::placeholder {
        color: #ccc;
    }
    .search-box .btn-primary {
        background: linear-gradient(90deg, #4da6ff, #1a73e8);
        border: none;
    }
    .search-box .btn-primary:hover {
        background: linear-gradient(90deg, #357ae8, #1a53c3);
    }

    /* ===== í†µê³„ ì¹´ë“œ ===== */
    .stats-summary {
        background: #3a3a51;
        padding: 25px;
        border-radius: 15px;
        box-shadow: 0 6px 20px rgba(0,0,0,0.4);
        text-align: center;
    }
    .stats-summary h4 {
        font-weight: 600;
        margin-bottom: 25px;
        color: #fff;
    }

    /* ===== Progress Bar ===== */
    .progress {
        height: 35px;
        border-radius: 20px;
        background-color: #50506a;
        overflow: hidden;
    }
    .progress-bar {
        font-weight: 600;
        font-size: 1rem;
        line-height: 35px;
        color: #fff;
    }
    #viewProgress { background: linear-gradient(90deg, #ffb74d, #ff9800); }
    #phoneProgress { background: linear-gradient(90deg, #1565c0, #1e88e5); } /* ì–´ë‘ìš´ íŒŒë€ìƒ‰ */

    .summary-text {
        margin-top: 8px;
        font-size: 1rem;
        color: #ccc;
    }

    /* ===== ë°˜ì‘í˜• ===== */
    @media(max-width: 768px) {
        h2 { font-size: 1.5rem; }
        .progress { height: 28px; }
    }
</style>
</head>
<body>
<div class="container mt-5">

    <h2>ğŸ“Š ì œíœ´ì  í†µê³„</h2>

    

    <!-- ì „ì²´ í†µê³„ ìš”ì•½ -->
    <div class="stats-summary">
        <h4>ì „ì²´ ì œíœ´ì  í†µê³„ ìš”ì•½</h4>

        <!-- ì „ì²´ ì¡°íšŒìˆ˜ -->
        <div class="mb-4">
            <h6 class="text-secondary">ì „ì²´ ì¡°íšŒìˆ˜</h6>
            <div class="progress">
                <div id="viewProgress" class="progress-bar" role="progressbar" style="width:0%;">
                    <span id="viewCountText">0</span>
                </div>
            </div>
            <div class="summary-text" id="viewSummary">
                ì˜¤ëŠ˜ê¹Œì§€ ëˆ„ì  ì¡°íšŒìˆ˜ëŠ” ì´ <strong>0íšŒ</strong>ì…ë‹ˆë‹¤.
            </div>
        </div>

        <!-- ì „ì²´ ì „í™”ë¬¸ì˜ -->
        <div class="mb-4">
            <h6 class="text-secondary">ì „ì²´ ì „í™”ë¬¸ì˜</h6>
            <div class="progress">
                <div id="phoneProgress" class="progress-bar" role="progressbar" style="width:0%;">
                    <span id="phoneCountText">0</span>
                </div>
            </div>
            <div class="summary-text" id="phoneSummary">
                ì˜¤ëŠ˜ê¹Œì§€ ëˆ„ì  ì „í™”ë¬¸ì˜ëŠ” ì´ <strong>0ê±´</strong>ì…ë‹ˆë‹¤.
            </div>
        </div>
    </div>

</div>

<script th:inline="javascript">
    const totalView = [[${totalStats['view']}]] || 0;
    const totalPhone = [[${totalStats['phone']}]] || 0;

    // ì¡°íšŒìˆ˜ Progress Bar
    const viewProgress = document.getElementById('viewProgress');
    const viewCountText = document.getElementById('viewCountText');
    const viewSummary = document.getElementById('viewSummary');
    const maxView = Math.max(totalView, 100);
    const viewPercent = Math.round((totalView / maxView) * 100);
    let currentView = 0;
    const animateView = setInterval(() => {
        if(currentView >= viewPercent) clearInterval(animateView);
        currentView++;
        viewProgress.style.width = currentView + '%';
        viewCountText.innerText = totalView.toLocaleString() + 'íšŒ';
        viewSummary.innerHTML = `í˜„ì¬ ëˆ„ì  ì¡°íšŒìˆ˜ëŠ” ì´ <strong>${totalView.toLocaleString()}íšŒ</strong> ì…ë‹ˆë‹¤.`;
    }, 10);

    // ì „í™”ë¬¸ì˜ Progress Bar
    const phoneProgress = document.getElementById('phoneProgress');
    const phoneCountText = document.getElementById('phoneCountText');
    const phoneSummary = document.getElementById('phoneSummary');
    const maxPhone = Math.max(totalPhone, 100);
    const phonePercent = Math.round((totalPhone / maxPhone) * 100);
    let currentPhone = 0;
    const animatePhone = setInterval(() => {
        if(currentPhone >= phonePercent) clearInterval(animatePhone);
        currentPhone++;
        phoneProgress.style.width = currentPhone + '%';
        phoneCountText.innerText = totalPhone.toLocaleString() + 'ê±´';
        phoneSummary.innerHTML = `í˜„ì¬ ëˆ„ì  ì „í™”ë¬¸ì˜ëŠ” ì´ <strong>${totalPhone.toLocaleString()}ê±´</strong> ì…ë‹ˆë‹¤.`;
    }, 10);

    // ê²€ìƒ‰ ê¸°ëŠ¥ (ì¤€ë¹„ìš©)
    function searchStats() {
        const partnerName = document.getElementById('partnerName').value;
        const startDate = document.getElementById('startDate').value;
        const endDate = document.getElementById('endDate').value;
        console.log('ê²€ìƒ‰:', partnerName, startDate, endDate);
    }
</script>
</body>
</html>
